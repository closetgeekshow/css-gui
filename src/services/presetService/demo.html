<!DOCTYPE html>
<html>
<head>
    <title>Preset Service Demo</title>
    <style>
        .container { padding: 20px; }
        .preset-form, .preset-list { margin: 20px 0; }
        .preset-item { 
            border: 1px solid #ccc;
            padding: 10px;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Preset Service Demo</h1>

        <!-- Create Preset Form -->
        <div class="preset-form">
            <h2>Create New Preset</h2>
            <input type="text" id="presetName" placeholder="Preset Name">
            <textarea id="presetVars" placeholder="CSS Variables (JSON format)">
{
    "--primary-color": "#007bff",
    "--spacing": "1rem"
}</textarea>
            <button onclick="createPreset()">Save Preset</button>
        </div>

        <!-- Preset List -->
        <div class="preset-list">
            <h2>Saved Presets</h2>
            <button onclick="loadAllPresets()">Refresh List</button>
            <div id="presetContainer"></div>
        </div>
    </div>

    <script type="module">
        import { PresetService } from './presetService.js';
        
        // Initialize service with demo API URL
        const presetService = new PresetService('https://api-demo.example.com');
        
        // Make functions available globally
        window.createPreset = async () => {
            try {
                const name = document.getElementById('presetName').value;
                const variables = JSON.parse(document.getElementById('presetVars').value);
                
                const preset = await presetService.savePreset({ name, variables });
                alert('Preset saved successfully!');
                loadAllPresets();
            } catch (error) {
                alert('Error saving preset: ' + error.message);
            }
        };

        window.loadAllPresets = async () => {
            try {
                const presets = await presetService.loadPresets();
                const container = document.getElementById('presetContainer');
                
                container.innerHTML = presets.map(preset => `
                    <div class="preset-item">
                        <h3>${preset.name}</h3>
                        <pre>${JSON.stringify(preset.variables, null, 2)}</pre>
                        <button onclick="deletePreset('${preset.id}')">Delete</button>
                    </div>
                `).join('');
            } catch (error) {
                alert('Error loading presets: ' + error.message);
            }
        };

        window.deletePreset = async (id) => {
            try {
                await presetService.deletePreset(id);
                alert('Preset deleted successfully!');
                loadAllPresets();
            } catch (error) {
                alert('Error deleting preset: ' + error.message);
            }
        };

        // Load presets on page load
        loadAllPresets();
    </script>
</body>
</html>
